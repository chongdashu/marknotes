<html>
    
<head>
    <title>MarkNotes</title>

    
    <script src="lib/jquery/js/jquery-2.1.3.min.js"></script>
    <script src="lib/jquery-editable/js/jeditable.min.js"></script>
    <script src="lib/bootstrap-3.3.5-dist/js/bootstrap.min.js"></script>
    <script src="lib/marked/js/marked-0.3.3.min.js"></script>
    <script src="lib/bootstrap-material-design/js/material.min.js"></script>

    <link rel="stylesheet" type="text/css" href="lib/bootstrap-3.3.5-dist/css/bootstrap.min.css"></link>
    <link rel="stylesheet" type="text/css" href="lib/bootstrap-material-design/css/material.min.css"></link>
    <link rel="stylesheet" href="lib/bootstrap-material-design/css/roboto.min.css" rel="stylesheet">
    <link rel="stylesheet" href="lib/bootstrap-material-design/css/material.min.css" rel="stylesheet">
    <link rel="stylesheet" href="lib/bootstrap-material-design/css/ripples.min.css" rel="stylesheet">

    <script>
        $(document).ready(function() {
            refresh();

            $("#button-load").click(function(e) {
                load();
            });

            $("#button-save").click(function(e) {
                save();
            });
            
            $(".input-container textarea").keyup(function(e) {
                refresh();
            });

            $(".title").editable(function(value, settings) {
                console.log(value);
                console.log(settings);

                console.log(normalized_text(value));

                return (value);
            }, {
                type    : "text",
                submit  : "OK"
            });
        });

        function normalized_text(text) {
            return text.replace(/\s/g,"-");
        }

        function normalized_title() {
            return $(".title").html();
        }

        function get_key() {
            return window.location.pathname;        
        }

        function load() {
            if (('localStorage' in window) && window.localStorage !== null) {

            // easy object property API
            var data = localStorage.getItem(get_key());
          
              if (data) {
                data = JSON.parse(data);    
                $(".input-container textarea").val(data[normalized_title()]);
                refresh();
              }
            } 

        }

        function save() {
            if (('localStorage' in window) && window.localStorage !== null) {

              // easy object property API
              data = {};

              data[normalized_title()] = $(".input-container textarea").val();
              localStorage.setItem(get_key(), JSON.stringify(data));

              return data;

            } else {
            }

        };

        function refresh() {
            var html = marked($(".input-container textarea").val());
            $(".render-container").html(html); 
        };
    </script>


</head>

<body>
    <div class="container">
        <div class="row">
            <div class="col-xs-6">
                <div class="title editable" style="width: 100%;">Untitled</div>
                <div class="input-container">
                    <textarea style="width: 100%; height: 80%;"># MarkNotes
 A simple tool to write markdown in your browser and have a live preview.

## Why?
Because sometimes it's easy to take notes in markdown notation.

It's nice when you can see it rendered.

It's even nicer if this happens in real-time.

## Source
Availabl on [GitHub](https://www.github.com/chongdashu/marknotes).
                    </textarea>
                </div>
                <div class="contols-container">
                    <div class="input-group">
                        <button type="button" class="btn btn-primary" id="button-load">Load</button>
                        <button type="button" class="btn btn-primary" id="button-save">Save</button>
                    </div>
                </div>
            </div> <!-- end .col-md-6-->
            <div class="col-xs-6">
                <div class="render-container" style="overflow-y: auto; height: 80%; margin-top: 6%">

                </div>
            </div>
        </div> <!-- end .row -->
    </div> <!-- end .container -->
</body>

</html>
